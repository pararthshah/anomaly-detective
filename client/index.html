<!DOCTYPE html>
<html>
	<head>
		<title>Anomaly Detective</title>
		<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/main.css" />
		<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
		<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<script src="//code.highcharts.com/stock/highstock.js"></script>

		<!-- Move to main.js or something-->
		<script type="text/javascript">
			var metricChart;

			$(document).ready(function() {
				$(function() {

					$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=large-dataset.json&callback=?', function(data) {
						// Create a timer
						var start = + new Date();

						// Create the chart
						$('#chart-container').highcharts('StockChart', {
								chart: {
								events: {
									load: function(chart) {
										this.setTitle(null, {
											text: 'Built chart in '+ (new Date() - start) +'ms'
										});
										metricChart = $("#chart-container").highcharts();
									}
								},
								zoomType: 'x'
								},
								rangeSelector: {
								inputEnabled: $('#chart-container').width() > 480,
										buttons: [{
												type: 'day',
												count: 3,
												text: '3d'
										}, {
												type: 'week',
												count: 1,
												text: '1w'
										}, {
												type: 'month',
												count: 1,
												text: '1m'
										}, {
												type: 'month',
												count: 6,
												text: '6m'
										}, {
												type: 'year',
												count: 1,
												text: '1y'
										}, {
												type: 'all',
												text: 'All'
										}],
										selected: 3
								},
							yAxis: {
								title: {
									text: 'Temperature (°C)'
								}
							},
								title: {
								text: 'Hourly temperatures in Vik i Sogn, Norway, 2004-2010'
							},
							subtitle: {
								text: 'Built chart in ...' // dummy text to reserve space for dynamic subtitle
							},
							series: [{
										name: 'Temperature',
										data: data,
										pointStart: Date.UTC(2004, 3, 1),
										pointInterval: 3600 * 1000,
										tooltip: {
											valueDecimals: 1,
											valueSuffix: '°C'
										}
								}]

						});
					});

				});

				$("#btn-get-metric").click(function() { 
					// fetch data from server
					$.getJSON("http://0.0.0.0:8080/data?machine=node1&metric=metric1", function(data) {
						metricChart.series[0].setData(data);
					});
				});
			});
		</script>
	</head>
<body>
	<div class="container">
		<div class="header">
			<h3 class="text-muted">Anomaly Detective</h3>
		</div>

		<!-- Machine/metric form begins-->
		<form role="form" class="form-inline" id="form-metric">
			<div class="form-group">
				<label for="machine-name" class="control-label">Machine Name</label>
				<select class="form-control" id="machine-name">
					<!--Rendered through JS-->
					<option value="1">Dummy 1</option>
					<option value="2">Dummy 2</option>
					<option value="3">Dummy 3</option>
				</select>
			</div>

			<div class="form-group">
				<label for="metric-name" class="control-label">Metric Name</label>
				<select class="form-control" id="metric-name">
					<!--Rendered through JS-->
					<option value="1">Dummy 1</option>
					<option value="2">Dummy 2</option>
					<option value="3">Dummy 3</option>
				</select>
			</div>
			<div class="form-group">
				<label form="metric-interval">Interval (s)</label>
				<input type="text" class="form-control" />
			</div>
			<div class="form-group">
				<button type="button" class="form-control btn btn-primary" id="btn-get-metric">Go</button>
			</div>
		</form>
		<!-- machine/mertric form ends-->

		<!-- chart container-->
		<div id="chart-container">
		</div>

		<!-- controls begin-->
		<div id="controls">
			<div class="row">
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">Detection Options</div>
						<div class="panel-body">
							<!-- panel form-->
							<form role="form">
								<div class="form-group">
									<label for="algorithm">Algorithm</label>
									<select id="algorithm" class="form-control">
										<option value="MA">Moving Average</option>
										<option value="HMM">Hidden Markov Model</option>
									</select>
								</div>
								<div class="form-group" id="algorithm-params">
								</div>
							</form>
							<!-- panel form ends-->
						</div>
					</div>
				</div>

				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">Annotation</div>
						<div class="panel-body">
						</div>
					</div>
				</div>
			</div>
		</div> <!--controls end-->
	</div><!--container ends-->
</body>
</html>
